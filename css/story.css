/* ================================================================
   SHNP • Our Story page styles  • v6 upgrades
   - Sticky top strip + slower marquee
   - Scroll lock on mobile drawer
   - Clean anchor landings under header
   - Tighter feature rows, 4:3 media frames with depth
   - Timeline connectors
   - Visible focus states
   - Motion standards + reduced motion
   - Stats micro count-up support
   --------------------------------------------------------------- */

:root{
  --ease: cubic-bezier(.2,.8,.2,1);
  --dur-1: .18s;
  --dur-2: .36s;
  --dur-3: .7s;
  /* header height is set dynamically by JS too */
  --header-h: clamp(64px, 8vw, 92px);
  --anchor-offset: calc(var(--header-h) + 14px);
}

html { scroll-behavior: smooth; }
main { overflow-x: clip; }

/* focus states you can see */
:where(a,button,[role="button"],input,select,textarea,.pill,.btn,.btn-primary,.btn-ghost):focus-visible{
  outline: 3px solid var(--cta);
  outline-offset: 3px;
  border-radius: 10px;
}

/* anchors land clean under sticky header */
:where(main) :where([id]){ scroll-margin-top: var(--anchor-offset); }

/* -----------------------------
   Top strip: sticky + slower marquee
-------------------------------- */
.top-strip{
  position: sticky;
  top: 0;
  z-index: 40;
  background: color-mix(in srgb, var(--bg) 74%, #fff 26%);
  border-bottom: 1px solid var(--border);
  backdrop-filter: saturate(1.1) blur(6px);
}
.top-strip .top-strip__inner{ display:flex; align-items:center; gap:12px; }
.top-strip .kicker{ font-weight:800; letter-spacing:.2px; }

.scroller{
  overflow:hidden;
  mask-image: linear-gradient(90deg, transparent, #000 12%, #000 88%, transparent);
}
.scroller__track{
  display:inline-flex; gap:28px; white-space:nowrap;
  animation: marquee 40s linear infinite;
}
@keyframes marquee{
  from{ transform: translateX(0) }
  to{ transform: translateX(-50%) }
}

/* -----------------------------
   Lock page when hamburger is open
-------------------------------- */
body.drawer-open{
  overflow: hidden;
  height: 100dvh;
  overscroll-behavior: contain;
  touch-action: none;
}

/* overlay behind the drawer */
.nav{ position: relative; z-index: 45; }
.nav.open::before{
  content:"";
  position: fixed; inset: 0;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(2px);
  z-index: 9;
}
.hamburger-dropdown{ position: absolute; z-index: 10; }

/* -----------------------------
   Hero
-------------------------------- */
.story-hero{
  position:relative;
  padding:clamp(44px,7vw,88px) 0 clamp(28px,5vw,56px);
  background:
    radial-gradient(1200px 300px at 50% -140px, color-mix(in srgb, var(--periwinkle-200) 24%, transparent) 0%, transparent 70%),
    linear-gradient(180deg, var(--bg) 0%, #fff 100%);
  border-bottom:1px solid var(--divider);
}
.story-hero .tag{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border:1px solid var(--border);border-radius:999px;
  background: var(--lavender-100);
  font-weight:700; font-size:13px; color:var(--ink);
}
.story-hero h1{ margin-top:8px; }
.story-hero .lead{ max-width:820px; font-size:clamp(16px,1.6vw,19px); color:var(--ink-2); margin-top:10px; }
.story-hero::after{
  content:""; position:absolute; inset:-60px -10% auto -10%; height:200px;
  background:
    radial-gradient(200px 120px at 20% 40%, color-mix(in srgb, var(--periwinkle-200) 26%, transparent) 0%, transparent 60%),
    radial-gradient(220px 140px at 70% 60%, color-mix(in srgb, var(--lavender-200) 26%, transparent) 0%, transparent 60%);
  filter: blur(12px); opacity:.55; pointer-events:none;
}

/* ===============================
   Feature rows
   =============================== */
.feature{
  display:grid;
  grid-template-columns:minmax(0,1.05fr) minmax(0,1fr);
  gap:28px;
  align-items:start;
}
@media (min-width: 981px){
  .feature{ align-items:center; } /* center vertically on desktop */
}
.feature .copy h2{ margin-bottom:6px; }
.feature .copy p{ color:var(--ink-2); max-width:58ch; }

/* media frames with depth, predictable 4:3 */
.feature .media{
  position:relative;
  width:100%;
  max-width:560px;
  aspect-ratio:4/3;
  border-radius:var(--radius);
  overflow:hidden;
  border:1px solid var(--border);
  background: var(--card);
  box-shadow: 0 8px 28px rgba(16,18,22,.08), 0 2px 10px rgba(16,18,22,.06);
  justify-self:end;
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-1) var(--ease);
}
.feature .media:hover{
  transform: translateY(-2px);
  box-shadow: 0 14px 40px rgba(16,18,22,.14), 0 4px 14px rgba(16,18,22,.10);
}
.feature .media img{ display:block; width:100%; height:100%; object-fit:cover; object-position:center; }

/* flip columns when .alt is present */
.feature.alt .copy{ order:2; }
.feature.alt .media{ order:1; justify-self:start; }

@media (max-width:1200px){
  .feature{ grid-template-columns:1fr 1fr; }
}
@media (max-width:980px){
  .feature{ grid-template-columns:1fr; }
  .feature .media{ max-width:100%; justify-self:start; }
  .feature.alt .copy, .feature.alt .media{ order:unset; } /* stack on mobile */
}

/* Founder micro components */
.founder-card{
  display:flex; align-items:center; gap:12px; margin-top:12px;
  padding:10px 12px; border:1px solid var(--border); border-radius:999px; background:var(--panel);
}
.founder-card .avatar{
  width:36px; height:36px; border-radius:50%;
  background: radial-gradient(60% 60% at 50% 40%, var(--lavender-200), var(--periwinkle-200));
  border:1px solid var(--border);
}
.founder-card .meta{ display:flex; flex-direction:column; line-height:1.1; }
.founder-card .meta span{ color:var(--muted); font-size:12.5px; }

.pull{
  margin-top:12px; padding:12px 14px; border-left:3px solid var(--cta);
  background: color-mix(in srgb, var(--lavender-100) 55%, #fff 45%);
  border-radius:8px; color:var(--ink);
}

/* Pills */
.pill-row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
.pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:999px;
  background: var(--lavender-100); border:1px solid var(--border);
  color:var(--ink); text-decoration:none!important; transition:transform var(--dur-1) var(--ease);
  font-weight:800;
}
.pill:hover{ transform:translateY(-1px); }

/* Info cards */
.info-grid{ display:grid; grid-template-columns:2fr 1fr; gap:clamp(18px,2.5vw,24px); }
@media (max-width:980px){ .info-grid{ grid-template-columns:1fr; } }
.info-card{
  background: var(--card); border:1px solid var(--border); border-radius:var(--radius);
  padding:clamp(18px,2.4vw,24px); box-shadow: var(--shadow);
}
.info-card h3{ margin-bottom:8px; }
.info-card p{ color:var(--ink-2); }

/* What we do */
.do-list{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:14px; }
@media (max-width:980px){ .do-list{ grid-template-columns:1fr 1fr; } }
@media (max-width:640px){ .do-list{ grid-template-columns:1fr; } }
.do-item{ padding:14px; border:1px solid var(--border); border-radius:14px; background: var(--card); }
.do-item strong{ display:block; margin-bottom:6px; }
.do-bullets{ margin-top:10px; columns:2; column-gap:16px; list-style:none; padding:0; }
@media (max-width:700px){ .do-bullets{ columns:1; } }
.do-bullets li{
  position:relative; padding-left:18px; margin:6px 0; color:var(--ink-2); break-inside:avoid;
}
.do-bullets li::before{
  content:""; position:absolute; left:0; top:.6em; width:8px; height:8px; border-radius:50%;
  background:linear-gradient(180deg, var(--cta), var(--cta-2));
}

/* Vision */
.vision{
  position:relative; border:1px solid var(--border); border-radius:var(--radius);
  padding:clamp(22px,3vw,30px);
  background:
    radial-gradient(140% 100% at 100% 0%, color-mix(in srgb, var(--periwinkle-200) 18%, transparent) 0%, transparent 60%),
    radial-gradient(120% 80% at 0% 100%, color-mix(in srgb, var(--lavender-200) 18%, transparent) 0%, transparent 60%),
    var(--card);
  box-shadow: var(--shadow);
}
.vision h3{ margin-bottom:8px; }
.vision p{ color:var(--ink-2); }
.vision .sig{ display:flex; align-items:center; gap:10px; margin-top:12px; color:var(--muted); }
.badge{
  display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid var(--border);
  background: var(--lavender-50); color:var(--ink); font-weight:800; font-size:13px;
}

/* About values */
.about-slab{ display:grid; grid-template-columns:1.2fr 1fr; gap:18px; }
@media (max-width:980px){ .about-slab{ grid-template-columns:1fr; } }
.about-left{
  border:1px solid var(--border); border-radius:var(--radius);
  padding:18px; background: var(--card); box-shadow: var(--shadow);
}
.about-left .eyebrow{ color:var(--muted); font-weight:800; letter-spacing:.3px; }
.about-right{ display:grid; gap:12px; }
.value{ border:1px solid var(--border); border-radius:14px; padding:14px; background: var(--panel); }
.value h5{ margin-bottom:6px; }

/* CTA */
.story-cta{
  display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
  border:1px solid var(--border); border-radius:var(--radius); padding:18px;
  background:linear-gradient(180deg, color-mix(in srgb, var(--lavender-100) 55%, #fff 45%), #fff);
}
.story-cta p{ color:var(--ink-2); }

/* Timeline */
.timeline{ position:relative; margin-top:14px; }
.timeline::before{
  content:""; position:absolute; left:50%; top:0; bottom:0; width:2px;
  background: color-mix(in srgb, var(--border) 75%, #bbb 25%); transform: translateX(-1px);
}
.t-row{
  display:grid; grid-template-columns:1fr 1fr; gap:18px; align-items:center;
  position:relative; padding:18px 0;
}
.t-row .t-copy{ position:relative; }
.t-row .t-copy h4{ margin-bottom:6px; }
.t-row .t-copy p{ color:var(--ink-2); }

/* tiny horizontal connector ticks to center rail */
.t-row .t-copy::before{
  content:""; position:absolute; top:calc(50% - 1px); height:2px; width:18px;
  background: color-mix(in srgb, var(--border) 65%, #999 35%);
  opacity:.9;
}
.t-row:not(.reverse) .t-copy::before{ right:-18px; border-radius:2px 0 0 2px; }
.t-row.reverse .t-copy::before{ left:-18px; border-radius:0 2px 2px 0; }

.t-row .t-media{
  justify-self:end; width:100%; max-width:480px; aspect-ratio:4/3;
  border:1px solid var(--border); border-radius:14px; overflow:hidden; background:var(--card);
  box-shadow:var(--shadow);
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-1) var(--ease);
}
.t-row .t-media:hover{ transform: translateY(-2px) }
.t-row .t-media img{ width:100%; height:100%; object-fit:cover; display:block; }

.t-row::after{
  content:""; position:absolute; left:50%; top:50%; width:12px; height:12px; border-radius:50%;
  background:linear-gradient(180deg, var(--cta), var(--cta-2));
  transform: translate(-50%,-50%);
  box-shadow:0 0 0 4px color-mix(in srgb, var(--lavender-100) 65%, #fff 35%);
}
.t-row.reverse .t-copy{ order:2; padding-left:18px; }
.t-row.reverse .t-media{ order:1; justify-self:start; }

@media (max-width:980px){
  .timeline::before{ left:12px; transform:none; }
  .t-row{ grid-template-columns:1fr; padding-left:28px; }
  .t-row .t-media,
  .t-row.reverse .t-media{ justify-self:start; max-width:100%; }
  .t-row::after{ left:12px; }
  .t-row.reverse .t-copy{ order:2; padding-left:0; }
  .t-row .t-copy::before{ display:none; } /* hide ticks on narrow screens */
}

/* Stats */
.stats{ margin-top:12px; display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px; }
@media (max-width:980px){ .stats{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:560px){ .stats{ grid-template-columns:1fr; } }
.stat{
  background:var(--card); border:1px solid var(--border); border-radius:14px;
  padding:16px; text-align:center; box-shadow: var(--shadow);
}
.stat__num{
  font-size:clamp(28px,4vw,36px); font-weight:800; line-height:1;
  background:linear-gradient(180deg,var(--cta),var(--cta-2));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.stat__label{ color:var(--ink-2); margin-top:6px; }

/* Fancy impact stats with emojis */
.stats.stats-fancy{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:16px;
}
@media (max-width:980px){ .stats.stats-fancy{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:560px){ .stats.stats-fancy{ grid-template-columns:1fr; } }

.stats.stats-fancy .stat{
  position:relative;
  padding:22px 20px;
  border-radius:18px;
  border:1px solid transparent;
  background:
    linear-gradient(var(--card), var(--card)) padding-box,
    linear-gradient(135deg, color-mix(in srgb, var(--lavender-200) 60%, #fff 40%), color-mix(in srgb, var(--periwinkle-200) 60%, #fff 40%)) border-box;
  box-shadow:
    0 10px 24px rgba(73, 59, 142, .08),
    0 2px 8px rgba(73, 59, 142, .06);
  text-align:center;
  transition: transform var(--dur-1) var(--ease), box-shadow var(--dur-1) var(--ease);
}
.stats.stats-fancy .stat:hover{
  transform:translateY(-2px);
  box-shadow:
    0 14px 30px rgba(73, 59, 142, .14),
    0 4px 10px rgba(73, 59, 142, .08);
}
.stat__emoji{
  font-size:28px;
  line-height:1;
  margin-bottom:8px;
  filter: drop-shadow(0 2px 6px rgba(73,59,142,.18));
}
.stats.stats-fancy .stat__num{
  font-size:clamp(30px,4.6vw,44px);
  font-weight:800;
  line-height:1;
  letter-spacing:.3px;
  background:linear-gradient(180deg,var(--cta),var(--cta-2));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  margin-bottom:6px;
}

/* optional pulse on first paint */
@keyframes stat-pop { 0%{ transform:scale(.98); opacity:.6 } 100%{ transform:scale(1); opacity:1 } }
.stats.stats-fancy .stat{ animation: stat-pop .4s var(--ease) both; }
.stats.stats-fancy .stat:nth-child(2){ animation-delay:.05s; }
.stats.stats-fancy .stat:nth-child(3){ animation-delay:.1s; }
.stats.stats-fancy .stat:nth-child(4){ animation-delay:.15s; }

/* Tick list */
.tick{ list-style:none; padding:0; }
.tick li{
  position:relative; padding-left:18px; margin:6px 0; color:var(--ink-2);
}
.tick li::before{
  content:""; position:absolute; left:0; top:.6em; width:10px; height:10px; border-radius:3px;
  background:linear-gradient(180deg, var(--cta), var(--cta-2));
}

/* Reveal on scroll - motion standards */
.reveal-slide{ opacity:0; transform: translateY(18px); will-change: transform, opacity; }
.reveal-slide.from-left{ transform: translateX(-36px); }
.reveal-slide.from-right{ transform: translateX(36px); }
.reveal-slide.is-visible{
  opacity:1; transform: translateX(0) translateY(0);
  transition: transform var(--dur-3) var(--ease), opacity .6s ease;
}

/* Micro utils */
.max-700{ max-width:700px; }
.m-6{ margin-top:6px; }
.m-10{ margin-top:10px; }
.gap-10{ display:flex; gap:10px; flex-wrap:wrap; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  html { scroll-behavior: auto; }
  .reveal-slide, .reveal-slide.is-visible{ transition:none; transform:none; opacity:1; }
  .stats.stats-fancy .stat{ animation:none }
  .scroller__track{ animation-play-state: paused !important; }
  .feature .media, .t-row .t-media{ transition: none; }
}
